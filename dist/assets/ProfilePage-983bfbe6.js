import{u as w,l as b,a as v,r as i,j as e,m as g,C,e as P,g as T,h as F,i as E,I as o,B as U,s as A}from"./index-1d1ce9ed.js";import{L as c}from"./label-eae76c9c.js";import{U as I}from"./user-0a6c7720.js";import{L as p}from"./loader-2-07cb1bf6.js";const G=({setHeaderStep:n})=>{const{user:a}=w(),{profile:s,loadingProfile:x,refreshProfile:j}=b(),{toast:d}=v(),[m,u]=i.useState(""),[f,y]=i.useState(""),[r,h]=i.useState(!1);i.useEffect(()=>{n("Mi Cuenta",0,0),s&&(u(s.full_name||""),y(s.profile_type||""))},[n,s]);const N=async l=>{l.preventDefault(),h(!0);try{const{error:t}=await A.from("profiles").update({full_name:m,profile_type:f}).eq("id",a.id);if(t)throw t;d({title:"Perfil actualizado",description:"Tus datos se han guardado correctamente."}),j()}catch(t){d({variant:"destructive",title:"Error al actualizar",description:t.message})}finally{h(!1)}};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-8",children:[e.jsxs(g.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsxs("h1",{className:"text-4xl font-bold text-white flex items-center",children:[e.jsx(I,{className:"mr-4 text-primary h-10 w-10"}),"Mi Cuenta"]}),e.jsx("p",{className:"text-white/60 mt-2",children:"Gestiona tu información personal y revisa la actividad de tu cuenta."})]}),e.jsxs(C,{className:"glass-card",children:[e.jsxs(P,{children:[e.jsx(T,{className:"text-white",children:"Información del Perfil"}),e.jsx(F,{children:"Actualiza tu nombre y tipo de perfil."})]}),e.jsx(E,{children:x?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx(p,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email",className:"text-white/80",children:"Email"}),e.jsx(o,{id:"email",type:"email",value:(a==null?void 0:a.email)||"",disabled:!0,className:"bg-white/10 border-white/20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"fullName",className:"text-white/80",children:"Nombre Completo"}),e.jsx(o,{id:"fullName",value:m,onChange:l=>u(l.target.value),className:"bg-white/5 border-white/20 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"profileType",className:"text-white/80",children:"Tipo de Perfil"}),e.jsx(o,{id:"profileType",value:f,disabled:!0,className:"bg-white/10 border-white/20"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(U,{type:"submit",disabled:r,className:"bg-gradient-to-r from-[#FF3CAC] to-[#784BA0]",children:[r&&e.jsx(p,{className:"mr-2 h-4 w-4 animate-spin"}),r?"Guardando...":"Guardar Cambios"]})})]})})]})]})};export{G as default};
