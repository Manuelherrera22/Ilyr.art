import{c as xe,s as W,r as h,a as ne,b as me,u as le,l as G,j as e,C as m,e as y,g as w,i as b,B as p,I as B,T as he,D as ce,L as T,G as ue,J as je,d as pe,o as X,F as be,K as ge,h as R,N as Z,O as fe,Q as ee,V as Ne,W as F,X as ve}from"./index-1d1ce9ed.js";import{T as q}from"./textarea-2b7ed22c.js";import{L as ye}from"./loader-2-07cb1bf6.js";import{P as we}from"./plus-ee418383.js";import{f as k,e as K,B as _,a as Ce,N as _e}from"./NotificationsBell-9e56db9c.js";import{S as Me,l as Se,g as ke}from"./projects-824941ba.js";import{C as $}from"./calendar-fda30b35.js";import{T as Te,a as Ae,b as H,c as z,g as Pe,d as Ee,e as Re}from"./comments-599b21d1.js";import{A as De}from"./arrow-left-1cdc855b.js";import{C as se}from"./check-circle-c06d78bc.js";const Ie=xe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),te=s=>Array.isArray(s)?s.filter(Boolean):typeof s=="string"?s.split(",").map(r=>r.trim()).filter(Boolean):[],Le=async({accountId:s,userId:r,formData:a})=>{var u,g,j,A,M,S,P;if(!s)return{error:new Error("No se encontró una cuenta de cliente asociada al perfil.")};const i={projectTitle:(u=a.projectTitle)==null?void 0:u.trim(),objective:(g=a.objective)==null?void 0:g.trim(),audience:(j=a.audience)==null?void 0:j.trim(),keyMessages:(A=a.keyMessages)==null?void 0:A.trim(),successMetrics:(M=a.successMetrics)==null?void 0:M.trim(),budgetRange:(S=a.budgetRange)==null?void 0:S.trim(),deadline:a.deadline||null,distributionChannels:te(a.distributionChannels),references:te(a.references),additionalNotes:(P=a.additionalNotes)==null?void 0:P.trim()},d={distribution_channels:i.distributionChannels,success_metrics:i.successMetrics,additional_notes:i.additionalNotes},{data:x,error:l}=await W.from("projects").insert({client_account_id:s,created_by:r,title:i.projectTitle||"Nuevo proyecto",status:"intake",metadata:d}).select().single();if(l)return{error:l};const{data:v,error:n}=await W.from("project_briefs").insert({project_id:x.id,client_id:r,submitted_by:r,status:"submitted",objective:i.objective,audience:i.audience,key_messages:i.keyMessages,budget_range:i.budgetRange,deadline_date:i.deadline||null,references_payload:i.references,attachments:[],ai_insights:{}}).select().single();return n?{error:n}:{project:x,brief:v}},de=[""],ae={projectTitle:"",objective:"",audience:"",keyMessages:"",successMetrics:"",budgetRange:"",deadline:"",distributionChannels:"",references:de,additionalNotes:""},Q=[{id:1,title:"Contexto",description:"Cuéntanos lo esencial del proyecto."},{id:2,title:"Estrategia",description:"Objetivos, audiencias y mensajes clave."},{id:3,title:"Referencias",description:"Inspiraciones, canales y notas adicionales."},{id:4,title:"Confirmación",description:"Revisa y envía el brief al estudio."}],Be=({currentStep:s})=>e.jsx("div",{className:"mb-10 flex flex-wrap items-center gap-4",children:Q.map((r,a)=>{const i=a===s,d=a<s;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full border text-sm font-semibold transition-all ${i?"border-accent bg-accent text-accent-foreground shadow-lg":d?"border-primary bg-primary/20 text-primary":"border-white/20 text-white/60"}`,children:r.id}),e.jsxs("div",{className:"ml-3 mr-6",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:r.title}),e.jsx("p",{className:"text-xs text-white/60",children:r.description})]})]},r.id)})}),C=({label:s,value:r})=>e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[e.jsx("p",{className:"text-xs uppercase tracking-widest text-white/40",children:s}),e.jsx("p",{className:"mt-2 text-sm font-medium text-white/90 whitespace-pre-line",children:r||"—"})]}),Fe=()=>{const[s,r]=h.useState(ae),[a,i]=h.useState(0),[d,x]=h.useState(!1),{toast:l}=ne(),v=me(),{session:n}=le(),{clientAccountId:u}=G(),g=h.useMemo(()=>s.references??de,[s.references]),j=o=>c=>{r(f=>({...f,[o]:c.target.value}))},A=(o,c)=>{r(f=>{const I=[...f.references??[]];return I[o]=c,{...f,references:I}})},M=()=>{r(o=>({...o,references:[...o.references??[],""]}))},S=o=>{r(c=>{const f=[...c.references??[]];return f.splice(o,1),{...c,references:f.length>0?f:[""]}})},P=()=>{switch(a){case 0:return!!(s.projectTitle&&s.objective);case 1:return!!s.audience;default:return!0}},E=()=>{if(!P()){l({variant:"destructive",title:"Completa los campos requeridos",description:"Necesitamos un poco más de información para continuar."});return}i(o=>Math.min(o+1,Q.length-1))},V=()=>{i(o=>Math.max(o-1,0))},D=async()=>{if(!(n!=null&&n.user)){l({variant:"destructive",title:"Sesión no encontrada",description:"Por favor inicia sesión nuevamente."});return}x(!0);const{error:o}=await Le({accountId:u,userId:n.user.id,formData:s});if(x(!1),o){l({variant:"destructive",title:"No se pudo enviar el brief",description:o.message||"Intenta de nuevo en unos minutos."});return}l({title:"Brief enviado",description:"Tu productor asignado revisará la información y te contactará enseguida.",className:"bg-green-500 text-white"}),r(ae),i(0),v("/client")},O=()=>{switch(a){case 0:return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Nombre del proyecto"}),e.jsx(B,{value:s.projectTitle,onChange:j("projectTitle"),placeholder:"Ej. Lanzamiento global de smartwatch"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Objetivo principal"}),e.jsx(q,{value:s.objective,onChange:j("objective"),placeholder:"Describe la meta principal: awareness, ventas, prueba, percepción premium...",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Deadline tentativo"}),e.jsx(B,{value:s.deadline,onChange:j("deadline"),type:"date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Rango de inversión"}),e.jsx(B,{value:s.budgetRange,onChange:j("budgetRange"),placeholder:"Ej. 15K - 30K USD"})]})]});case 1:return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Público objetivo"}),e.jsx(q,{value:s.audience,onChange:j("audience"),rows:4,placeholder:"Segmentos, comportamientos, insights clave."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Mensajes clave"}),e.jsx(q,{value:s.keyMessages,onChange:j("keyMessages"),rows:4,placeholder:"¿Qué debe quedar grabado en la audiencia?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Métricas de éxito"}),e.jsx(q,{value:s.successMetrics,onChange:j("successMetrics"),rows:3,placeholder:"KPI primario y secundarios: vistas, compras, leads, lift..."})]})]});case 2:return e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Canales de distribución"}),e.jsx(B,{value:s.distributionChannels,onChange:j("distributionChannels"),placeholder:"Ej. Instagram, OOH, TV, POS — separa por comas"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Referencias visuales / URLs"}),e.jsxs(p,{type:"button",size:"sm",variant:"outline",onClick:M,children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),"Añadir referencia"]})]}),e.jsx("div",{className:"space-y-3",children:g.map((o,c)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{value:o,onChange:f=>A(c,f.target.value),placeholder:"https://..."}),g.length>1&&e.jsx(p,{type:"button",variant:"ghost",className:"text-red-400 hover:text-red-500",onClick:()=>S(c),children:e.jsx(he,{className:"h-4 w-4"})})]},`ref-${c}`))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Notas adicionales"}),e.jsx(q,{value:s.additionalNotes,onChange:j("additionalNotes"),rows:4,placeholder:"Restricciones de marca, entregables específicos, consideraciones legales..."})]})]});case 3:return e.jsxs("div",{className:"grid gap-4",children:[e.jsx(C,{label:"Proyecto",value:s.projectTitle}),e.jsx(C,{label:"Objetivo",value:s.objective}),e.jsx(C,{label:"Público objetivo",value:s.audience}),e.jsx(C,{label:"Mensajes clave",value:s.keyMessages}),e.jsx(C,{label:"Métricas",value:s.successMetrics}),e.jsx(C,{label:"Deadline",value:s.deadline}),e.jsx(C,{label:"Inversión",value:s.budgetRange}),e.jsx(C,{label:"Canales",value:s.distributionChannels}),e.jsx(C,{label:"Referencias",value:g.filter(Boolean).join(`
`)}),e.jsx(C,{label:"Notas",value:s.additionalNotes})]});default:return null}};return e.jsxs(m,{className:"border border-white/10 bg-[#10121A]/80 backdrop-blur",children:[e.jsxs(y,{className:"border-b border-white/10 pb-6",children:[e.jsx(w,{className:"text-3xl font-semibold text-white",children:"Brief inteligente"}),e.jsx("p",{className:"text-sm text-white/60",children:"Describe el reto y deja que el equipo de productores y la IA diagnóstica preparen la propuesta ideal."})]}),e.jsxs(b,{className:"pt-8",children:[e.jsx(Be,{currentStep:a}),e.jsxs("div",{className:"space-y-8",children:[O(),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsx(p,{type:"button",variant:"ghost",onClick:V,disabled:a===0||d,className:"text-white/70 hover:text-white",children:"Volver"}),a<Q.length-1?e.jsx(p,{type:"button",onClick:E,disabled:d,children:"Siguiente"}):e.jsx(p,{type:"button",className:"bg-accent text-accent-foreground",onClick:D,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviando..."]}):"Enviar brief"})]})]})]})]})},re={draft:{label:"Draft",tone:"bg-white/10 text-white/80"},intake:{label:"Brief enviado",tone:"bg-blue-500/20 text-blue-200"},in_review:{label:"En revisión",tone:"bg-yellow-500/20 text-yellow-200"},approved:{label:"Aprobado",tone:"bg-green-500/20 text-green-200"},production:{label:"En producción",tone:"bg-purple-500/20 text-purple-100"},delivered:{label:"Entregado",tone:"bg-emerald-500/20 text-emerald-100"}},qe=({project:s})=>{var l,v,n;const r=re[s.status]??re.draft,a=(l=s.project_briefs)==null?void 0:l[0],i=k(new Date(s.created_at),"dd MMM yyyy",{locale:K}),d=((v=s.project_milestones)==null?void 0:v.find(u=>u.status!=="completed"))||(a==null?void 0:a.deadline_date)&&{name:"Deadline propuesto",due_at:a.deadline_date},x=((n=s.metadata)==null?void 0:n.distribution_channels)??[];return e.jsxs(m,{className:"border border-white/10 bg-[#10121A]/80 backdrop-blur transition hover:border-accent/50",children:[e.jsxs(y,{className:"flex flex-row items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx(w,{className:"text-xl text-white",children:s.title}),e.jsxs("p",{className:"text-xs text-white/50 mt-1",children:["Creado el ",i]})]}),e.jsx(_,{className:r.tone,children:r.label})]}),e.jsxs(b,{className:"space-y-4 text-white/80",children:[a?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-white/90",children:"Objetivo"}),e.jsx("p",{className:"text-sm leading-relaxed",children:a.objective||"Sin definir"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/50",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Aún no se ha completado el brief."]}),x.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/40 mb-1",children:"Canales objetivo"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(u=>e.jsx(_,{variant:"secondary",className:"bg-white/10 text-white/80",children:u},u))})]}),e.jsx(Me,{className:"bg-white/10"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[e.jsx($,{className:"h-4 w-4"}),d?e.jsxs("span",{children:["Próximo hito:"," ",e.jsx("span",{className:"text-white/80 font-medium",children:d.name||"Deadline"})," ","el"," ",k(new Date(d.due_at||d.deadline_date),"dd MMM yyyy",{locale:K})]}):e.jsx("span",{children:"No hay hitos programados"})]}),e.jsx(p,{asChild:!0,size:"sm",variant:"ghost",className:"text-accent hover:text-accent/80 hover:bg-accent/10",children:e.jsxs(T,{to:`/client/projects/${s.id}`,children:["Ver detalle ",e.jsx(ue,{className:"ml-1 h-4 w-4"})]})})]})]})]})},Ve=()=>{const{clientAccountId:s}=G(),[r,a]=h.useState([]),[i,d]=h.useState(!0),[x,l]=h.useState(null);h.useEffect(()=>{(async()=>{if(!s){d(!1),a([]);return}d(!0);const{data:u,error:g}=await Se(s);g?l(g.message):(a(u||[]),l(null)),d(!1)})()},[s]);const v=h.useMemo(()=>r.sort((n,u)=>new Date(u.created_at)-new Date(n.created_at)),[r]);return i?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(ce,{})}):x?e.jsx(m,{className:"border border-red-500/40 bg-red-500/10",children:e.jsxs(b,{className:"py-12 text-center text-red-200",children:[e.jsx("p",{className:"font-semibold",children:"No pudimos cargar tus proyectos."}),e.jsx("p",{className:"mt-2 text-sm opacity-80",children:x})]})}):v.length===0?e.jsx(m,{className:"border border-white/10 bg-[#10121A]/60 text-center",children:e.jsxs(b,{className:"py-16 text-white/70",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Todavía no tienes proyectos activos con el estudio."}),e.jsx("p",{className:"mt-2 text-sm text-white/50",children:"Cuando un productor apruebe tu brief, el proyecto aparecerá aquí con cada avance y entrega."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Tus proyectos"}),e.jsx("p",{className:"text-sm text-white/60",children:"Cada tarjeta refleja el estado actual, próximos hitos y la información estratégica que compartiste."})]}),e.jsx("div",{className:"grid gap-6 lg:grid-cols-2",children:v.map(n=>e.jsx(qe,{project:n},n.id))})]})},ie={draft:{label:"Draft",tone:"bg-white/10 text-white/80"},intake:{label:"Brief enviado",tone:"bg-blue-500/20 text-blue-200"},in_review:{label:"En revisión",tone:"bg-yellow-500/20 text-yellow-200"},approved:{label:"Aprobado",tone:"bg-green-500/20 text-green-200"},production:{label:"En producción",tone:"bg-purple-500/20 text-purple-100"},delivered:{label:"Entregado",tone:"bg-emerald-500/20 text-emerald-100"}},Oe=()=>{var J;const{projectId:s}=je(),{clientAccountId:r}=G(),{user:a}=le(),{toast:i}=ne(),{i18n:d}=pe(),x=d.language==="es"?K:Ce,[l,v]=h.useState(null),[n,u]=h.useState([]),[g,j]=h.useState([]),[A,M]=h.useState(!0),[S,P]=h.useState(null),[E,V]=h.useState(""),[D,O]=h.useState(!1);h.useEffect(()=>{(async()=>{if(!(!r||!s))try{M(!0);const N=await ke(s,r);v(N);const[U,oe]=await Promise.all([Pe(s),Ee(s,a.id)]);u(U),j(oe)}catch(N){console.error("Error fetching project details:",N),P(N.message)}finally{M(!1)}})()},[r,s,a]);const o=async()=>{if(E.trim()){O(!0);try{const t=await Re(s,a.id,E,"client");j([...g,t]),V(""),i({title:"Comentario publicado",description:"Tu comentario se ha publicado correctamente"})}catch(t){console.error("Error creating comment:",t),i({variant:"destructive",title:"Error",description:t.message||"No se pudo publicar el comentario"})}finally{O(!1)}}};if(A)return e.jsx(ce,{});if(S||!l)return e.jsxs("div",{className:"text-center text-red-400 bg-red-900/20 p-6 rounded-lg",children:[e.jsx("p",{className:"text-xl font-semibold",children:S||"Proyecto no encontrado"}),e.jsx(p,{asChild:!0,className:"mt-4",children:e.jsx(T,{to:"/client/projects",children:"Volver a mis proyectos"})})]});const c=(J=l.project_briefs)==null?void 0:J[0],f=l.project_milestones||[],I=ie[l.status]||ie.draft,Y=n.filter(t=>t.is_final),L=l.project_assignments||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{asChild:!0,variant:"outline",children:e.jsxs(T,{to:"/client/projects",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Volver"]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:l.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx(_,{className:I.tone,children:I.label}),L.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground/70",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{children:[L.length," miembro",L.length!==1?"s":""," del equipo"]})]})]})]})]}),e.jsxs(Te,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Ae,{children:[e.jsx(H,{value:"overview",children:"Resumen"}),e.jsx(H,{value:"timeline",children:"Timeline"}),e.jsx(H,{value:"assets",children:"Entregables"}),e.jsx(H,{value:"comments",children:"Comentarios"})]}),e.jsxs(z,{value:"overview",className:"space-y-4",children:[c&&e.jsxs(m,{className:"bg-card/40 border-border/40",children:[e.jsx(y,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"Brief del Proyecto"]})}),e.jsxs(b,{className:"space-y-4",children:[c.objective&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Objetivo"}),e.jsx("p",{className:"text-foreground/80",children:c.objective})]}),c.audience&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Audiencia"}),e.jsx("p",{className:"text-foreground/80",children:c.audience})]}),c.key_messages&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Mensajes Clave"}),e.jsx("p",{className:"text-foreground/80",children:c.key_messages})]}),c.deadline_date&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4 text-foreground/70"}),e.jsxs("span",{className:"text-foreground/80",children:["Deadline: ",k(new Date(c.deadline_date),"dd MMM yyyy",{locale:x})]})]})]})]}),L.length>0&&e.jsxs(m,{className:"bg-card/40 border-border/40",children:[e.jsx(y,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5"}),"Equipo Asignado"]})}),e.jsx(b,{children:e.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:L.map(t=>{var N;return e.jsx("div",{className:"flex items-center gap-3 p-3 bg-background/50 rounded-lg",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:((N=t.profiles)==null?void 0:N.full_name)||"Usuario sin nombre"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(_,{variant:"outline",className:"text-xs",children:t.role}),t.stage&&e.jsx(_,{variant:"secondary",className:"text-xs",children:t.stage})]})]})},t.id)})})})]})]}),e.jsxs(z,{value:"timeline",className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Timeline del Proyecto"}),f.length===0?e.jsxs(m,{className:"bg-card/40 border-border/40 text-center p-8",children:[e.jsx(ge,{className:"w-12 h-12 mx-auto mb-4 text-foreground/50"}),e.jsx(R,{children:"No hay hitos definidos aún"})]}):e.jsx("div",{className:"space-y-4",children:f.map((t,N)=>e.jsxs(m,{className:"bg-card/40 border-border/40",children:[e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/20 text-primary font-bold",children:N+1}),e.jsx(w,{children:t.name})]}),e.jsx(_,{variant:t.status==="approved"?"default":t.status==="in_progress"?"secondary":"outline",children:t.status})]}),t.description&&e.jsx(R,{className:"mt-2",children:t.description})]}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-2",children:[t.due_at&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground/70",children:[e.jsx($,{className:"w-4 h-4"}),e.jsxs("span",{children:["Vence: ",k(new Date(t.due_at),"dd MMM yyyy",{locale:x})]})]}),t.status==="approved"&&t.approved_at&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-400",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsxs("span",{children:["Aprobado: ",k(new Date(t.approved_at),"dd MMM yyyy",{locale:x})]})]})]})})]},t.id))})]}),e.jsxs(z,{value:"assets",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Entregables"}),e.jsxs(_,{variant:"outline",children:[n.length," versión",n.length!==1?"es":""]})]}),Y.length>0&&e.jsxs(m,{className:"bg-card/40 border-border/40 border-green-500/30",children:[e.jsx(y,{children:e.jsxs(w,{className:"flex items-center gap-2 text-green-400",children:[e.jsx(se,{className:"w-5 h-5"}),"Versiones Finales"]})}),e.jsx(b,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Y.map(t=>e.jsxs(m,{className:"bg-background/50",children:[e.jsxs(y,{children:[e.jsxs(w,{className:"text-lg",children:["Versión ",t.version," - Final"]}),t.notes&&e.jsx(R,{children:t.notes})]}),e.jsx(b,{children:e.jsx(p,{asChild:!0,variant:"outline",className:"w-full",children:e.jsxs("a",{href:t.file_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Descargar"]})})})]},t.id))})})]}),n.length===0?e.jsxs(m,{className:"bg-card/40 border-border/40 text-center p-8",children:[e.jsx(fe,{className:"w-12 h-12 mx-auto mb-4 text-foreground/50"}),e.jsx(R,{children:"No hay assets entregados aún"})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Todas las Versiones"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(t=>e.jsxs(m,{className:"bg-card/40 border-border/40",children:[e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(w,{className:"text-lg",children:["Versión ",t.version,t.is_final&&e.jsx(_,{variant:"default",className:"ml-2",children:"Final"})]}),e.jsx(_,{variant:"outline",children:t.type})]}),t.notes&&e.jsx(R,{className:"mt-2",children:t.notes})]}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-foreground/70",children:k(new Date(t.created_at),"dd MMM yyyy HH:mm",{locale:x})}),t.profiles&&e.jsxs("div",{className:"text-sm text-foreground/70",children:["Por: ",t.profiles.full_name]}),e.jsx(p,{asChild:!0,variant:"outline",className:"w-full mt-4",children:e.jsxs("a",{href:t.file_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Descargar"]})})]})})]},t.id))})]})]}),e.jsxs(z,{value:"comments",className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Comentarios"}),e.jsxs(m,{className:"bg-card/40 border-border/40",children:[e.jsx(y,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5"}),"Nuevo Comentario"]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsx("textarea",{value:E,onChange:t=>V(t.target.value),placeholder:"Escribe un comentario o feedback...",className:"w-full min-h-[100px] px-3 py-2 bg-background border border-border rounded-md text-foreground",disabled:D}),e.jsx(p,{onClick:o,disabled:!E.trim()||D,children:D?"Publicando...":"Publicar Comentario"})]})]}),e.jsx("div",{className:"space-y-4",children:g.length===0?e.jsxs(m,{className:"bg-card/40 border-border/40 text-center p-8",children:[e.jsx(ee,{className:"w-12 h-12 mx-auto mb-4 text-foreground/50"}),e.jsx(R,{children:"No hay comentarios aún"})]}):g.map(t=>{var N,U;return e.jsx(m,{className:"bg-card/40 border-border/40",children:e.jsx(b,{className:"pt-6",children:e.jsx("div",{className:"flex items-start gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-foreground",children:((N=t.profiles)==null?void 0:N.full_name)||"Usuario"}),e.jsx(_,{variant:"outline",className:"text-xs",children:((U=t.profiles)==null?void 0:U.profile_type)||"user"}),e.jsx("span",{className:"text-sm text-foreground/50",children:k(new Date(t.created_at),"dd MMM yyyy HH:mm",{locale:x})})]}),e.jsx("p",{className:"text-foreground/80",children:t.message})]})})})},t.id)})})]})]})]})},Ue=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{className:"bg-card/40 border-border/40",children:[e.jsx(y,{children:e.jsx(w,{className:"text-2xl font-semibold text-foreground",children:"Próximos pasos de tu partnership"})}),e.jsxs(b,{className:"space-y-4 text-foreground/80",children:[e.jsx("p",{children:"Aquí verás tus proyectos activos, próximos hitos y mensajes del equipo ILYR. Mientras construimos las funcionalidades operativas, puedes iniciar un brief inteligente para activar el equipo."}),e.jsx(p,{asChild:!0,className:"bg-gradient-to-r from-accent to-orange-500 text-accent-foreground",children:e.jsx(T,{to:"brief/new",children:"Crear brief"})})]})]}),e.jsxs(m,{className:"bg-card/20 border-border/30",children:[e.jsx(y,{children:e.jsx(w,{className:"text-xl font-semibold text-foreground",children:"¿Qué podrás hacer aquí?"})}),e.jsxs(b,{className:"grid gap-4 text-foreground/70",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"1. Gestionar proyectos"}),e.jsx("p",{children:"Resumen de estatus, responsables y próximos pasos para cada producción."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"2. Seguir entregables"}),e.jsx("p",{children:"Versiones, descargas finales y aprobaciones centralizadas."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:"3. Colaborar con el estudio"}),e.jsx("p",{children:"Mensajería estructurada, comentarios y agenda de sesiones."})]})]})]})]}),He=({children:s})=>e.jsxs("div",{className:"min-h-screen bg-[#05070D] text-white",children:[e.jsx("div",{className:"border-b border-white/10 bg-black/30 backdrop-blur",children:e.jsxs("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-6 py-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/50",children:"ILYR Client Portal"}),e.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Laboratorio de experiencias visuales"})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx(p,{asChild:!0,variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:e.jsx(T,{to:".",children:"Resumen"})}),e.jsx(p,{asChild:!0,variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:e.jsx(T,{to:"brief/new",children:"Nuevo brief"})}),e.jsx(p,{asChild:!0,variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:e.jsx(T,{to:"projects",children:"Proyectos"})}),e.jsx(_e,{})]})]})}),e.jsx("main",{className:"mx-auto min-h-[calc(100vh-120px)] w-full max-w-6xl px-6 py-10",children:s})]}),es=()=>e.jsx(He,{children:e.jsxs(Ne,{children:[e.jsx(F,{index:!0,element:e.jsx(Ue,{})}),e.jsx(F,{path:"brief/new",element:e.jsx(Fe,{})}),e.jsx(F,{path:"projects",element:e.jsx(Ve,{})}),e.jsx(F,{path:"projects/:projectId",element:e.jsx(Oe,{})}),e.jsx(F,{path:"*",element:e.jsx(ve,{to:".",replace:!0})})]})});export{es as default};
